!function(){"use strict";function t(t){if(t&&t.length>0){var o=_.map(t,function(t){return{lat:t.latitude,"long":t.longitude,info:t.name}});travelMap.createMap({stops:o,selector:"#map",currentStop:0,icon:{url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAGCAIAAABvrngfAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAAAA1JREFUGFdjoDNgYAAAAHIAAejt7scAAAAASUVORK5CYII=",width:3,height:3},initialZoom:2,pastStroke:{color:"#190300",opacity:.5,weight:2},futureStroke:{color:"#D30000",opacity:.6,weight:2},mapOptions:{draggable:!0,scrollwheel:!1,disableDoubleClickZoom:!0,zoomControl:!0}})}}angular.module("app-trips").controller("tripEditorController",["$routeParams","$http",function(o,A){var a=this;a.tripName=o.tripName,a.stops=[],a.errorMessage="",a.isBusy=!0,a.newStop={};var e="/api/trips/"+a.tripName+"/stops";A.get(e).then(function(o){angular.copy(o.data,a.stops),t(a.stops)},function(t){a.errorMessage="Failed to load stops. "+t.data})["finally"](function(){a.isBusy=!1}),a.addStop=function(){a.isBusy=!0,a.errorMessage="",A.post(e,a.newStop).then(function(o){a.stops.push(o.data),t(a.stops),a.newStop={}},function(t){a.errorMessage="Failed to save new stop. "+t.data})["finally"](function(){a.isBusy=!1})}}])}();